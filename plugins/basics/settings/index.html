

    




<!DOCTYPE html>
<html lang="en">
<head>
    <title>Plugin Settings | BetterDiscord Docs</title>
    <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta charset="utf-8" />
<meta property="og:site_name" content="BetterDiscord Docs">
<meta property="og:title" content="BetterDiscord Documentation &amp; Guides">
<meta property="og:description" content="User and developer documentation for using and creating addons for BetterDiscord.">
<meta property="og:url" content="">
<meta property="og:image" content="/assets/branding/logo_solid.png">
<meta property="og:image:alt" content="BetterDiscord Logo" />


<meta property="twitter:site" content="BetterDiscord Docs">
<meta property="twitter:card" content="summary" />
<meta property="twitter:title" content="BetterDiscord Documentation &amp; Guides">
<meta property="twitter:description" content="User and developer documentation for using and creating addons for BetterDiscord.">
<meta property="twitter:url" content="">
<meta property="twitter:image" content="/assets/branding/logo_solid.png">
<meta property="twitter:image:alt" content="BetterDiscord Logo" />


<meta name="theme-color" content="#3a71c1">
<meta name="description" content="BetterDiscord extends the functionality of DiscordApp by enhancing it with new features.">
<meta name="keywords" content="Discord, BetterDiscord, Better Discord, Discord Mod, Discord Themes, Discord Plugins, Discord Extensions, Discord Client Mod, Discord Hacks, Documentation, Docs, Guide, Tutorial">
<meta name="author" content="BetterDiscord">
<meta name="msapplication-TileColor" content="#3a71c1">
<meta name="msapplication-TileImage" content="/assets/favicon/ms-icon-144x144.png">
<link rel="apple-touch-icon" sizes="57x57" href="/assets/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="/assets/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/favicon/manifest.json">
<link rel="stylesheet" href="/styles/vendor/normalize.css" />
<link rel="stylesheet" href="/styles/vendor/overlayscrollbars.min.css" />
<link rel="stylesheet" href="/styles/main.css" />
<link rel="preload" as="font" type="font/woff2" href="/assets/fonts/Inter-Medium.woff2" crossorigin />
<link rel="preload" as="font" type="font/woff2" href="/assets/fonts/Inter-SemiBold.woff2" crossorigin />
<link rel="preload" as="font" type="font/woff2" href="/assets/fonts/Inter-Bold.woff2" crossorigin />
<link rel="preload" as="font" type="font/woff" href="/assets/fonts/Inter-Medium.woff" crossorigin />
<link rel="preload" as="font" type="font/woff" href="/assets/fonts/Inter-SemiBold.woff" crossorigin />
<link rel="preload" as="font" type="font/woff" href="/assets/fonts/Inter-Bold.woff" crossorigin />

<script defer src="/scripts/vendor/overlayscrollbars.min.js"></script>
<script defer src="/scripts/main.js"></script>
</head>

<body class="line-numbers">
    
    <header id="navbar" class="page-section flex-container align-center">
    <div class="page-section-inner">
        <a class="navbar-logo-container" href="/">
            <img loading="lazy" class="navbar-logo hide-mobile" src="/assets/branding/logo_large.svg" alt="BetterDiscord logo" />
            <img loading="lazy" class="navbar-logo small" src="/assets/branding/logo_small.svg" alt="BetterDiscord logo" />
        </a>
        <nav id="navbar-nav-items" class="flex-container align-center" data-toggle="affix">
            
                <a  class="nav-item"  href="/general/">General</a>
                <a  class="nav-item nav-item-selected" href="/plugins/">Plugin Development</a>
                <a  class="nav-item"  href="/themes/">Theme Development</a>
        </nav>
    </div>
</header>


    <main id="main-page-content">
        
        <header id="docs-header" class="flex-container align-center">
            <button id="header-sidebar-btn" class="btn btn-secondary">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"> <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"> </path> </svg>
            </button>
            <h2 class="docs-header-title">Plugins</h2>
        </header>
        
        <section class="page-section" id="docs-section">
            <div class="page-section-inner">
                
    
        
        <div id="docs-splitview" class="flex-container">
            <aside class="docs-sidebar mobile-hidden">
                
    <div class="docs-sidebar-header">
        <button id="sidebar-btn" class="btn btn-secondary">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z">
                </path>
            </svg>
        </button>
        <h2 class="docs-header-title"></h2>
    </div>
    <div class="docs-sidebar-backdrop"></div>
    <div class="docs-sidebar-inner">
    
        <div class="sidebar-group">
            <div class="sidebar-group-header">Introduction</div>
            
                
                    <a href="/plugins/introduction/quick-start/" class="sidebar-item">Quick Start</a>
                
            
                
                    <a href="/plugins/introduction/devtools/" class="sidebar-item">Developer Tools</a>
                
            
                
                    <a href="/plugins/introduction/environment/" class="sidebar-item">Environment</a>
                
            
                
                    <a href="/plugins/introduction/structure/" class="sidebar-item">Plugin Structure</a>
                
            
                
                    <a href="/plugins/introduction/guidelines/" class="sidebar-item">Guidelines</a>
                
            
        </div>
    
        <div class="sidebar-group">
            <div class="sidebar-group-header">Basics</div>
            
                
                    <a href="/plugins/basics/creating-a-plugin/" class="sidebar-item">Creating a Plugin</a>
                
            
                
                    <a href="/plugins/basics/dom/" class="sidebar-item">Using the DOM</a>
                
            
                
                    <div class="sidebar-item selected" class="sidebar-item">Plugin Settings</div>
                
            
                
                    <a href="/plugins/basics/ui/" class="sidebar-item">UI Components</a>
                
            
                
                    <a href="/plugins/basics/betterdiscord/" class="sidebar-item">Interacting with BD</a>
                
            
                
                    <a href="/plugins/basics/addons/" class="sidebar-item">Addon Interaction</a>
                
            
                
                    <a href="/plugins/basics/discord/" class="sidebar-item">Changing Discord</a>
                
            
        </div>
    
        <div class="sidebar-group">
            <div class="sidebar-group-header">Intermediate</div>
            
                
                    <a href="/plugins/intermediate/react/" class="sidebar-item">React</a>
                
            
                
                    <a href="/plugins/intermediate/webpack/" class="sidebar-item">Webpack</a>
                
            
        </div>
    
        <div class="sidebar-group">
            <div class="sidebar-group-header">Advanced</div>
            
                
                    <a href="/plugins/advanced/patching/" class="sidebar-item">Functional Patching</a>
                
            
                
                    <a href="/plugins/advanced/webpack/" class="sidebar-item">Webpack Modules</a>
                
            
                
                    <a href="/plugins/advanced/react/" class="sidebar-item">React Injection</a>
                
            
        </div>
    
        <div class="sidebar-group">
            <div class="sidebar-group-header">Discord Reference</div>
            
                
                    <a href="/plugins/discord/modules/" class="sidebar-item">Known Modules</a>
                
            
                
                    <a href="/plugins/discord/ui/" class="sidebar-item">Discord UI</a>
                
            
        </div>
    
        <div class="sidebar-group">
            <div class="sidebar-group-header">API Reference</div>
            
                
                    <a href="/plugins/api/bdapi/" class="sidebar-item">BdApi</a>
                
            
                
                    <a href="/plugins/api/patcher/" class="sidebar-item">Patcher</a>
                
            
                
                    <a href="/plugins/api/addonapi/" class="sidebar-item">AddonAPI</a>
                
            
        </div>
    
    </div>

            </aside>
            <article class="docs-content">
                <div class="markdown-body flex-container direction-column">           
                    
  <h1 id="plugin-settings" tabindex="-1">Plugin Settings <a class="direct-link" href="#plugin-settings" aria-hidden="true">#</a></h1>
<p>In BetterDiscord, plugins settings are very open-ended and flexible; there is no one correct way to do them. In this section we're going to look at one way to manage your settings. This includes using BetterDiscord to save and load the settings data, and making use of the <code>getSettingsPanel</code> function described in <a href="../../introduction/structure">plugin structure</a>.</p>
<p>Using <code>getSettingsPanel</code> is the recommended way to show a settings panel to the user because it creates a consistent flow for the user. If every plugin added a button in the Discord UI for their own settings button, it could end up chaotic. Instead using <code>getSettingsPanel</code> allows your plugin to have a settings button on the plugins page in the BetterDiscord settings. Most users will expect a plugin to implement this if they have settings of any kind.</p>
<h2 id="managing-settings" tabindex="-1">Managing Settings <a class="direct-link" href="#managing-settings" aria-hidden="true">#</a></h2>
<h3 id="structure" tabindex="-1">Structure <a class="direct-link" href="#structure" aria-hidden="true">#</a></h3>
<p>Typically, settings are managed and stored in the form of an object literal.</p>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-keyword">const</span> mySettings = {
    <span class="hljs-attr">setting1</span>: <span class="hljs-string">&quot;value&quot;</span>,
    <span class="hljs-attr">setting2</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">setting3</span>: [<span class="hljs-number">1</span>, <span class="hljs-string">&quot;foo&quot;</span>],
    <span class="hljs-attr">setting4</span>: {
        <span class="hljs-attr">subsetting</span>: <span class="hljs-string">&quot;red&quot;</span>,
        <span class="hljs-attr">subsetting2</span>: <span class="hljs-string">&quot;see-through&quot;</span>
    },
    <span class="hljs-attr">setting5</span>: <span class="hljs-literal">false</span>
};
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<p>Using an object like this has many benefits:</p>
<ul>
<li>Easy to read and understand</li>
<li>Can hold different types of values</li>
<li>JSON-compatible</li>
<li>Quick lookup and addition</li>
</ul>
<p>This can even be extended and organized further to include categories:</p>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-keyword">const</span> mySettings = {
    <span class="hljs-attr">colors</span>: {
        <span class="hljs-attr">accent</span>: <span class="hljs-string">&quot;#ff0000&quot;</span>
    }
    <span class="hljs-attr">general</span>: {
        <span class="hljs-attr">config</span>: {
            <span class="hljs-attr">value</span>: <span class="hljs-number">0</span>
        }
    }
}
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<p>Where you store this object in your plugin is up to the individual developer. It may also depend on the style of plugin you create. If you use a <code>class</code> it may be helpful to initialize your settings in the constructor and reference it using <code>this.settings</code>.</p>
<h3 id="saving-settings" tabindex="-1">Saving Settings <a class="direct-link" href="#saving-settings" aria-hidden="true">#</a></h3>
<p>BetterDiscord gives you an easy way to save your settings in a JSON file using <code>BdApi.saveData</code>. This function takes your plugin's name, the key you want to save and the corresponding data to save. This means you can save your entire settings object from above under a single key, or save each key invidually. See the examples below to help understand the difference.</p>
<p>Saving the whole settings object under a single key:</p>
<div class="code-tab-container"><input type="radio" id="object-JS" name="object" class="code-tab" checked><label for="object-JS">JS</label><input type="radio" id="object-JSON" name="object" class="code-tab"><label for="object-JSON">JSON</label>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-keyword">const</span> mySettings = {
    <span class="hljs-attr">setting1</span>: <span class="hljs-string">&quot;value&quot;</span>,
    <span class="hljs-attr">setting2</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">setting3</span>: [<span class="hljs-number">1</span>, <span class="hljs-string">&quot;foo&quot;</span>],
    <span class="hljs-attr">setting4</span>: {
        <span class="hljs-attr">subsetting</span>: <span class="hljs-string">&quot;red&quot;</span>,
        <span class="hljs-attr">subsetting2</span>: <span class="hljs-string">&quot;see-through&quot;</span>
    },
    <span class="hljs-attr">setting5</span>: <span class="hljs-literal">false</span>
};
    
<span class="hljs-title hljs-bd class_">BdApi</span>.<span class="hljs-title function_">saveData</span>(<span class="hljs-string">&quot;myPlugin&quot;</span>, <span class="hljs-string">&quot;settings&quot;</span>, mySettings);
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<pre class="language-json line-numbers"><code class="language-json line-numbers"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;setting1&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;value&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;setting2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;setting3&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;foo&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;setting4&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;subsetting&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;red&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;subsetting2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;see-through&quot;</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;setting5&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
</div>
<p>Saving each key separately:</p>
<div class="code-tab-container"><input type="radio" id="keys-JS" name="keys" class="code-tab" checked><label for="keys-JS">JS</label><input type="radio" id="keys-JSON" name="keys" class="code-tab"><label for="keys-JSON">JSON</label>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-keyword">const</span> mySettings = {
    <span class="hljs-attr">setting1</span>: <span class="hljs-string">&quot;value&quot;</span>,
    <span class="hljs-attr">setting2</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">setting3</span>: [<span class="hljs-number">1</span>, <span class="hljs-string">&quot;foo&quot;</span>],
    <span class="hljs-attr">setting4</span>: {
        <span class="hljs-attr">subsetting</span>: <span class="hljs-string">&quot;red&quot;</span>,
        <span class="hljs-attr">subsetting2</span>: <span class="hljs-string">&quot;see-through&quot;</span>
    },
    <span class="hljs-attr">setting5</span>: <span class="hljs-literal">false</span>
};

<span class="hljs-keyword">const</span> keys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(mySettings);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">of</span> keys) {
    <span class="hljs-title hljs-bd class_">BdApi</span>.<span class="hljs-title function_">saveData</span>(<span class="hljs-string">&quot;myPlugin&quot;</span>, key, mySettings[key]);
}
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<pre class="language-json line-numbers"><code class="language-json line-numbers"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;setting1&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;value&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;setting2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;setting3&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;foo&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;setting4&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;subsetting&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;red&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;subsetting2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;see-through&quot;</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;setting5&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
<span class="hljs-punctuation">}</span>
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
</div>
<p>The first options--saving the entire object under a single key--may seem redundant at first, but it allows the saving to be done in a single operation. Having it under a <code>settings</code> key means you can save other plugin relevant data under different keys without worrying about key collision. It also means that when you load the settings, you can load it in a single operation without having to know the keys beforehand.</p>
<h3 id="loading-settings" tabindex="-1">Loading Settings <a class="direct-link" href="#loading-settings" aria-hidden="true">#</a></h3>
<p>Similar to above, BetterDiscord gives you an easy way to load your settings from a JSON file using <code>BdApi.loadData</code>. This function takes your plugin's name and the key you want to load. Just like before, you can have everything saved under one <code>settings</code> key, or saved individually in multiple keys. These are illustrated below.</p>
<p>Loading the whole settings object from a single key:</p>
<div class="code-tab-container"><input type="radio" id="load-object-JS" name="load-object" class="code-tab" checked><label for="load-object-JS">JS</label><input type="radio" id="load-object-JSON" name="load-object" class="code-tab"><label for="load-object-JSON">JSON</label>
<pre class="language-js"><code class="language-js"><span class="hljs-keyword">const</span> mySettings = <span class="hljs-title hljs-bd class_">BdApi</span>.<span class="hljs-title function_">loadData</span>(<span class="hljs-string">&quot;myPlugin&quot;</span>, <span class="hljs-string">&quot;settings&quot;</span>);
<button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<pre class="language-json line-numbers"><code class="language-json line-numbers"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;setting1&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;value&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;setting2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;setting3&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;foo&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;setting4&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;subsetting&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;red&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;subsetting2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;see-through&quot;</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;setting5&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
</div>
<p>Loading each key separately:</p>
<div class="code-tab-container"><input type="radio" id="load-keys-JS" name="load-keys" class="code-tab" checked><label for="load-keys-JS">JS</label><input type="radio" id="load-keys-JSON" name="load-keys" class="code-tab"><label for="load-keys-JSON">JSON</label>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-comment">// We have to know the keys ahead of time</span>
<span class="hljs-keyword">const</span> mySettings = {};
<span class="hljs-keyword">const</span> keys = [<span class="hljs-string">&quot;setting1&quot;</span>, <span class="hljs-string">&quot;setting2&quot;</span>, <span class="hljs-string">&quot;setting3&quot;</span>, <span class="hljs-string">&quot;setting4&quot;</span>, <span class="hljs-string">&quot;setting5&quot;</span>];

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">of</span> keys) {
    mySettings[key] = <span class="hljs-title hljs-bd class_">BdApi</span>.<span class="hljs-title function_">loadData</span>(<span class="hljs-string">&quot;myPlugin&quot;</span>, key);
}
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<pre class="language-json line-numbers"><code class="language-json line-numbers"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;setting1&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;value&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;setting2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;setting3&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;foo&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;setting4&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;subsetting&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;red&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;subsetting2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;see-through&quot;</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;setting5&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
<span class="hljs-punctuation">}</span>
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
</div>
<p>Much like when saving the data, it's a bit more straightforward to load the entire object rather than by individual keys. Though it does mean you load everything at once instead of as-needed.</p>
<h3 id="default-settings" tabindex="-1">Default Settings <a class="direct-link" href="#default-settings" aria-hidden="true">#</a></h3>
<p>One common issue developers run into is default settings. Having defaults is extremely useful for when you add or adjust settings. For example, say you have a setting called <code>color</code>. This is fine if you only have one color-based setting. But if you add another color, calling it <code>color</code> is not specific enough so you change it to <code>accentColor</code>. But if you load a user's previous settings, it will still be called <code>color</code>, this can lead to unexpected outcomes.</p>
<div class="code-tab-container"><input type="radio" id="default-bad-JS" name="default-bad" class="code-tab" checked><label for="default-bad-JS">JS</label><input type="radio" id="default-bad-JSON" name="default-bad" class="code-tab"><label for="default-bad-JSON">JSON</label>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-keyword">const</span> mySettings = <span class="hljs-title hljs-bd class_">BdApi</span>.<span class="hljs-title function_">loadData</span>(<span class="hljs-string">&quot;myPlugin&quot;</span>, <span class="hljs-string">&quot;settings&quot;</span>);
<span class="hljs-keyword">const</span> myButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;my-button&quot;</span>);
myButton.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = mySettings.<span class="hljs-property">accentColor</span>; <span class="hljs-comment">// undefined</span>
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<pre class="language-json line-numbers"><code class="language-json line-numbers"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;color&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;red&quot;</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
</div>
<p>In that example, not only would the button not be the desired color, it would remove any previously applied color as well, which is probably not desired. But how do we solve this? Defaults. If you have a set of default settings that you can extend with the loaded data, you won't end up with an undefined value. This is how it might look:</p>
<div class="code-tab-container"><input type="radio" id="default-good-JS" name="default-good" class="code-tab" checked><label for="default-good-JS">JS</label><input type="radio" id="default-good-JSON" name="default-good" class="code-tab"><label for="default-good-JSON">JSON</label>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-keyword">const</span> myDefaults = {
    <span class="hljs-attr">accentColor</span>: <span class="hljs-string">&quot;blue&quot;</span>
};

<span class="hljs-keyword">const</span> mySettings = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, myDefaults, <span class="hljs-title hljs-bd class_">BdApi</span>.<span class="hljs-title function_">loadData</span>(<span class="hljs-string">&quot;myPlugin&quot;</span>, <span class="hljs-string">&quot;settings&quot;</span>));
<span class="hljs-keyword">const</span> myButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;my-button&quot;</span>);
myButton.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = mySettings.<span class="hljs-property">accentColor</span>; <span class="hljs-comment">// &quot;blue&quot;</span>
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<pre class="language-json line-numbers"><code class="language-json line-numbers"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;color&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;red&quot;</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
</div>
<p>In this case, the button ends up blue instead of red. While not entirely desireable, it does not cause unexpected issues. This same concept can be applied to adding new settings that did not exist.</p>
<p>The key here is the call to <code>Object.assign()</code>. This function extends objects using other objects, essentially combining and overriding the keys. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign">MDN has a great explanation</a> of the details of how this works. In this case, the order is important. You want the loaded data to override any existing value in the default object, so the loaded data comes last in the list. You'll notice that the target object is an empty object <code>{}</code>. If you use the default settings object instead, that <strong>object will be modified</strong> so when you go to use it again in the future the values may be overridden. Using <code>{}</code> means a new object will be created and returned. An equivalent and more verbose version is shown below:</p>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-keyword">const</span> myDefaults = {
    <span class="hljs-attr">accentColor</span>: <span class="hljs-string">&quot;blue&quot;</span>
};

<span class="hljs-keyword">const</span> mySettings = {};
<span class="hljs-keyword">const</span> storedData = <span class="hljs-title hljs-bd class_">BdApi</span>.<span class="hljs-title function_">loadData</span>(<span class="hljs-string">&quot;myPlugin&quot;</span>, <span class="hljs-string">&quot;settings&quot;</span>);
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(mySettings, myDefaults, storedData);
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<h2 id="settings-menu" tabindex="-1">Settings Menu <a class="direct-link" href="#settings-menu" aria-hidden="true">#</a></h2>
<p>Since we're using <code>getSettingsPanel()</code> we need to create an html element that not only represents our settings, but allows the user to change them. The best way to do this is to turn each setting into an input and display it to the user. Let's say for example we have this setting schema:</p>
<pre class="language-js line-numbers"><code class="language-js line-numbers">{
    <span class="hljs-attr">buttonText</span>: <span class="hljs-string">&quot;Click Me!&quot;</span>,
    <span class="hljs-attr">darkMode</span>: <span class="hljs-literal">true</span>
}
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<p>The first setting, <code>buttonText</code> is a string, which is best represented by a text input <code>input[type=text]</code>. The second, <code>darkMode</code> is a boolean, best represented by a checkbox <code>input[type=checkbox]</code>.</p>
<p>So if we were doing this with just html, it might look something like this:</p>
<pre class="language-html line-numbers"><code class="language-html line-numbers"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;my-settings&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;setting&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Button Text<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;buttonText&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;setting&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Dark Mode<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;darkMode&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<p>So let's build this with JavaScript.</p>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-keyword">const</span> mySettingsPanel = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
mySettingsPanel.<span class="hljs-property">id</span> = <span class="hljs-string">&quot;my-settings&quot;</span>;


<span class="hljs-keyword">const</span> buttonTextSetting = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
buttonTextSetting.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;setting&quot;</span>);

<span class="hljs-keyword">const</span> buttonTextLabel = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;span&quot;</span>)
buttonTextLabel.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;Button Text&quot;</span>;

<span class="hljs-keyword">const</span> buttonTextInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;input&quot;</span>);
buttonTextInput.<span class="hljs-property">type</span> = <span class="hljs-string">&quot;text&quot;</span>;
buttonTextInput.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;buttonText&quot;</span>;

buttonTextSetting.<span class="hljs-title function_">append</span>(buttonTextLabel, buttonTextInput);


<span class="hljs-keyword">const</span> darkModeSetting = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
darkModeSetting.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;setting&quot;</span>);

<span class="hljs-keyword">const</span> darkModeLabel = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;span&quot;</span>)
darkModeLabel.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;Dark Mode&quot;</span>;

<span class="hljs-keyword">const</span> darkModeInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;input&quot;</span>);
darkModeInput.<span class="hljs-property">type</span> = <span class="hljs-string">&quot;checkbox&quot;</span>;
darkModeInput.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;darkMode&quot;</span>;

darkModeSetting.<span class="hljs-title function_">append</span>(darkModeLabel, darkModeInput);


mySettingsPanel.<span class="hljs-title function_">append</span>(buttonTextSetting, darkModeSetting);
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<p>It's a bit long winded, but that's how it would look using vanilla js with no helper functions. Nonetheless we have a <code>mySettingsPanel</code> which represents the html we created. Let's put this into a plugin and see how it looks. Don't forget to <code>return</code> your <code>mySettingsPanel</code>!</p>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-comment hljs-jsdoc">/**
 * <span class="hljs-doctag">@name</span> TutorialPlugin
 * <span class="hljs-doctag">@author</span> YourName
 * <span class="hljs-doctag">@description</span> Learning how to make BetterDiscord plugins!
 * <span class="hljs-doctag">@version</span> 0.0.1
 */</span>

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function"><span class="hljs-params">meta</span> =&gt;</span> {

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">start</span>: <span class="hljs-function">() =&gt;</span> {
      
    },
    <span class="hljs-attr">stop</span>: <span class="hljs-function">() =&gt;</span> {
      
    },
    <span class="hljs-attr">getSettingsPanel</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> mySettingsPanel = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
        mySettingsPanel.<span class="hljs-property">id</span> = <span class="hljs-string">&quot;my-settings&quot;</span>;


        <span class="hljs-keyword">const</span> buttonTextSetting = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
        buttonTextSetting.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;setting&quot;</span>);

        <span class="hljs-keyword">const</span> buttonTextLabel = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;span&quot;</span>)
        buttonTextLabel.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;Button Text&quot;</span>;

        <span class="hljs-keyword">const</span> buttonTextInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;input&quot;</span>);
        buttonTextInput.<span class="hljs-property">type</span> = <span class="hljs-string">&quot;text&quot;</span>;
        buttonTextInput.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;buttonText&quot;</span>;

        buttonTextSetting.<span class="hljs-title function_">append</span>(buttonTextLabel, buttonTextInput);


        <span class="hljs-keyword">const</span> darkModeSetting = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
        darkModeSetting.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;setting&quot;</span>);

        <span class="hljs-keyword">const</span> darkModeLabel = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;span&quot;</span>)
        darkModeLabel.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;Dark Mode&quot;</span>;

        <span class="hljs-keyword">const</span> darkModeInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;input&quot;</span>);
        darkModeInput.<span class="hljs-property">type</span> = <span class="hljs-string">&quot;checkbox&quot;</span>;
        darkModeInput.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;darkMode&quot;</span>;

        darkModeSetting.<span class="hljs-title function_">append</span>(darkModeLabel, darkModeInput);


        mySettingsPanel.<span class="hljs-title function_">append</span>(buttonTextSetting, darkModeSetting);

        <span class="hljs-keyword">return</span> mySettingsPanel;
    }
  }
};
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<p>Enable your plugin in settings, and click the plugin settings button. You should get something like this:</p>
<p><img src="/assets/docs/plugin_settings.png" alt="Ugly Settings"></p>
<p>It's not very pretty right now, but that's okay because we're focusing on functionality for the purpose of this tutorial.</p>
<p>Speaking of functionality however, this panel doesn't do much. It does not show the current value and it does not respond to updates by the user. Let's fix that.</p>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-comment">// Input element from above</span>
buttonTextInput.<span class="hljs-property">value</span> = mySettings.<span class="hljs-property">buttonText</span>; <span class="hljs-comment">// Value stored somewhere</span>
buttonTextInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;change&quot;</span>, <span class="hljs-function">() =&gt;</span> {
    mySettings.<span class="hljs-property">buttonText</span> = buttonTextInput.<span class="hljs-property">value</span>;
});

<span class="hljs-comment">// Input element from above</span>
darkModeInput.<span class="hljs-property">value</span> = mySettings.<span class="hljs-property">darkMode</span>; <span class="hljs-comment">// Value stored somewhere</span>
darkModeInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;change&quot;</span>, <span class="hljs-function">() =&gt;</span> {
    mySettings.<span class="hljs-property">darkMode</span> = darkModeInput.<span class="hljs-property">value</span>;
});
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<p>Now if you combine this with the previous code, you'll get a lot of repeating operations. This can be cleaned up in a few different ways, in this tutorial we are opting for a small helper function.</p>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildSetting</span>(<span class="hljs-params">text, key, type, value, callback = () =&gt; {}</span>) {
    <span class="hljs-keyword">const</span> setting = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>), {<span class="hljs-attr">className</span>: <span class="hljs-string">&quot;setting&quot;</span>});
    <span class="hljs-keyword">const</span> label = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;span&quot;</span>), {<span class="hljs-attr">textContent</span>: text});
    <span class="hljs-keyword">const</span> input = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;input&quot;</span>), {<span class="hljs-attr">type</span>: type, <span class="hljs-attr">name</span>: key, <span class="hljs-attr">value</span>: value});
    <span class="hljs-keyword">if</span> (type == <span class="hljs-string">&quot;checkbox&quot;</span> &amp;&amp; value) input.<span class="hljs-property">checked</span> = <span class="hljs-literal">true</span>;
    input.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;change&quot;</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> newValue = type == <span class="hljs-string">&quot;checkbox&quot;</span> ? input.<span class="hljs-property">checked</span> : input.<span class="hljs-property">value</span>;
        mySettings[key] = newValue;
        <span class="hljs-title hljs-bd class_">BdApi</span>.<span class="hljs-title function_">saveData</span>(meta.<span class="hljs-property">name</span>, <span class="hljs-string">&quot;settings&quot;</span>, mySettings);
        <span class="hljs-title function_">callback</span>(newValue);
    });
    setting.<span class="hljs-title function_">append</span>(label, input);
    <span class="hljs-keyword">return</span> setting;
}
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<p>Which makes our <code>getSettingsPanel()</code> look a little easier to digest</p>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-keyword">const</span> mySettingsPanel = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
mySettingsPanel.<span class="hljs-property">id</span> = <span class="hljs-string">&quot;my-settings&quot;</span>;

<span class="hljs-keyword">const</span> buttonText = <span class="hljs-title function_">buildSetting</span>(<span class="hljs-string">&quot;Button Text&quot;</span>, <span class="hljs-string">&quot;buttonText&quot;</span>, <span class="hljs-string">&quot;text&quot;</span>,
                                mySettings.<span class="hljs-property">buttonText</span>, updateButtonText);
<span class="hljs-keyword">const</span> darkMode = <span class="hljs-title function_">buildSetting</span>(<span class="hljs-string">&quot;Dark Mode&quot;</span>, <span class="hljs-string">&quot;darkMode&quot;</span>, <span class="hljs-string">&quot;checkbox&quot;</span>,
                              mySettings.<span class="hljs-property">darkMode</span>, updateButtonTheme);

mySettingsPanel.<span class="hljs-title function_">append</span>(buttonText, darkMode);
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<p>As we can see here, this will now allow the saved value of the settings to be shown when the panel opens, and it will also allow the user to update the settings. And thanks to our helper function, these values will also be saved.</p>
<p>If we put all the pieces together and combine it with the button we made in the <a href="../dom">DOM</a> section, we might end up with a plugin like this:</p>
<pre class="language-js line-numbers"><code class="language-js line-numbers"><span class="hljs-comment hljs-jsdoc">/**
 * <span class="hljs-doctag">@name</span> TutorialPlugin
 * <span class="hljs-doctag">@author</span> YourName
 * <span class="hljs-doctag">@description</span> Learning how to make BetterDiscord plugins!
 * <span class="hljs-doctag">@version</span> 0.0.1
 */</span>

 <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function"><span class="hljs-params">meta</span> =&gt;</span> {

    <span class="hljs-keyword">const</span> mySettings = {<span class="hljs-attr">buttonText</span>: <span class="hljs-string">&quot;Click me!&quot;</span>, <span class="hljs-attr">darkMode</span>: <span class="hljs-literal">true</span>};

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">buildSetting</span>(<span class="hljs-params">text, key, type, value, callback = () =&gt; {}</span>) {
        <span class="hljs-keyword">const</span> setting = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>), {<span class="hljs-attr">className</span>: <span class="hljs-string">&quot;setting&quot;</span>});
        <span class="hljs-keyword">const</span> label = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;span&quot;</span>), {<span class="hljs-attr">textContent</span>: text});
        <span class="hljs-keyword">const</span> input = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;input&quot;</span>), {<span class="hljs-attr">type</span>: type, <span class="hljs-attr">name</span>: key, <span class="hljs-attr">value</span>: value});
        <span class="hljs-keyword">if</span> (type == <span class="hljs-string">&quot;checkbox&quot;</span> &amp;&amp; value) input.<span class="hljs-property">checked</span> = <span class="hljs-literal">true</span>;
        input.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;change&quot;</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">const</span> newValue = type == <span class="hljs-string">&quot;checkbox&quot;</span> ? input.<span class="hljs-property">checked</span> : input.<span class="hljs-property">value</span>;
            mySettings[key] = newValue;
            <span class="hljs-title hljs-bd class_">BdApi</span>.<span class="hljs-title function_">saveData</span>(meta.<span class="hljs-property">name</span>, <span class="hljs-string">&quot;settings&quot;</span>, mySettings);
            <span class="hljs-title function_">callback</span>(newValue);
        });
        setting.<span class="hljs-title function_">append</span>(label, input);
        <span class="hljs-keyword">return</span> setting;
    }


    <span class="hljs-keyword">const</span> myButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;button&quot;</span>);
    myButton.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> {<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;Hello World!&quot;</span>);});

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateButtonText</span>(<span class="hljs-params"></span>) {
        myButton.<span class="hljs-property">textContent</span> = mySettings.<span class="hljs-property">buttonText</span>;
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateButtonTheme</span>(<span class="hljs-params"></span>) {
        <span class="hljs-keyword">if</span> (mySettings.<span class="hljs-property">darkMode</span>) {
            myButton.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">&quot;white&quot;</span>;
            myButton.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">&quot;black&quot;</span>;
        }
        <span class="hljs-keyword">else</span> {
            myButton.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">&quot;black&quot;</span>;
            myButton.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">&quot;white&quot;</span>;
        }
    }

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">start</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(mySettings, <span class="hljs-title hljs-bd class_">BdApi</span>.<span class="hljs-title function_">loadData</span>(meta.<span class="hljs-property">name</span>, <span class="hljs-string">&quot;settings&quot;</span>));
        <span class="hljs-keyword">const</span> serverList = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#app-mount&quot;</span>);
        serverList.<span class="hljs-title function_">append</span>(myButton);
        <span class="hljs-title function_">updateButtonText</span>();
        <span class="hljs-title function_">updateButtonTheme</span>();
    },
    <span class="hljs-attr">stop</span>: <span class="hljs-function">() =&gt;</span> {
        myButton.<span class="hljs-title function_">remove</span>();
    },
    <span class="hljs-attr">getSettingsPanel</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> mySettingsPanel = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
        mySettingsPanel.<span class="hljs-property">id</span> = <span class="hljs-string">&quot;my-settings&quot;</span>;

        <span class="hljs-keyword">const</span> buttonText = <span class="hljs-title function_">buildSetting</span>(<span class="hljs-string">&quot;Button Text&quot;</span>, <span class="hljs-string">&quot;buttonText&quot;</span>, <span class="hljs-string">&quot;text&quot;</span>,
                                        mySettings.<span class="hljs-property">buttonText</span>, updateButtonText);
        <span class="hljs-keyword">const</span> darkMode = <span class="hljs-title function_">buildSetting</span>(<span class="hljs-string">&quot;Dark Mode&quot;</span>, <span class="hljs-string">&quot;darkMode&quot;</span>, <span class="hljs-string">&quot;checkbox&quot;</span>,
                                      mySettings.<span class="hljs-property">darkMode</span>, updateButtonTheme);

        mySettingsPanel.<span class="hljs-title function_">append</span>(buttonText, darkMode);
        <span class="hljs-keyword">return</span> mySettingsPanel;
    }
  }
};
<span class="line-numbers-container" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><button title="Copy Code" class="btn btn-secondary btn-copy flex-container align-center hide-mobile"></button></code></pre>
<p>The new pieces here are the update functions <code>updateButtonText</code> and <code>updateButtonTheme</code> which are pretty straight-forward if you read through them. Otherwise, feel free to save this into your plugins folder and give it a test run. If you completed this section, you've successfully learned how to make a plugin with settings that actually work!</p>
<p>When you're ready to move on, check out the next chapter, <a href="../ui">UI Components</a>, that goes over different UI elements within Discord and BetterDiscord.</p>


  
    














<div class="flex-container justify-between wrap pagination-container">
    <a href="/plugins/basics/dom/" >
        <button class="btn btn-secondary" id="btn-back">
            <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M9.78 12.78a.75.75 0 01-1.06 0L4.47 8.53a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L6.06 8l3.72 3.72a.75.75 0 010 1.06z"></path></svg>
            <span>Using the DOM</span>
        </button>
    </a>
    <a href="/plugins/basics/ui/" >
        <button class="btn btn-secondary flex-container align-center" id="btn-next">
            <span>UI Components</span>
            <svg class="btn-icon btn-icon-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z"></path></svg>
        </button>
    </a>
</div>
  

                </div>
            </article>
        </div>

    

            </div>
        </section>
    </main>
    
    <div class="footer-container">
        <footer id="section-footer" class="page-section">
            <div class="page-section-inner">
                <section id="footer-top" class="flex-container hide-mobile">
                    <div class="footer-column">
                        <a class="footer-logo-wrap" href="/">
                            <img class="footer-logo" loading="lazy" src="/assets/branding/logo_large.svg" alt="Footer logo" />
                        </a>
                        <span class="footer-column-item">The Discord Enhancement Project</span>
                    </div>
                    <div class="footer-column">
                        <h3 class="footer-column-header">Community</h3>
                        <a rel="noreferrer noopener" target="_blank" href="https://discord.gg/0Tmfo5ZbORCRqbAd" class="footer-column-item"><span>BetterDiscord</span></a>
                        <a rel="noreferrer noopener" target="_blank" href="https://discord.gg/sbA3xCJ" class="footer-column-item"><span>BetterDiscord2</span></a>
                    </div>
                    <div class="footer-column">
                        <h3 class="footer-column-header">Content</h3>
                        <a href="/themes" class="footer-column-item"><span>Themes</span></a>
                        <a href="/plugins" class="footer-column-item"><span>Plugins</span></a>
                    </div>
                    <div class="footer-column">
                        <h3 class="footer-column-header">Help</h3>
                        <a href="/Docs" class="footer-column-item">Documentation</a>
                        <a href="/FAQ" class="footer-column-item">Frequent Questions</a>
                    </div>
                </section>
                <section id="footer-bottom" class="flex-container wrap align-center justify-between">
                    <div class="hide-desktop flex-container wrap" id="footer-privacy-container">
                        <div class="footer-privacy text-center">
                            <a href="https://betterdiscord.bsa-whitelabel.com/" class="footer-privacy-item">Advertise With Us</a>
                            <a href="/Privacy" class="footer-privacy-item">Privacy Policy</a>
                            <a href="/cdn-cgi/l/email-protection#ef8d8a9b9b8a9d8b869c8c809d8b988a8daf88828e8683c18c8082" class="footer-privacy-item">Contact Us</a>
                            <a href="#" class="footer-privacy-item" onclick="displayPreferenceModal()">Cookie Preferences</a>
                        </div>
                    </div>
                    <div class="flex-container wrap" id="footer-copyright-container">
                        <div class="footer-copyright text-center">
                             2015-2022
                            <a class="anchor" rel="noreferrer noopener" target="_blank" href="https://github.com/orgs/BetterDiscord/people">BetterDiscord Team</a>
                        </div>
                    </div>
                    <div id="footer-social-icons" class="flex-container justify-center wrap">
                        <a rel="noreferrer noopener" target="_blank" href="https://twitter.com/_BetterDiscord_" class="social-icon twitter">
                            <svg class="social-icon-inner" width="32" height="32" viewBox="0 0 20 16" aria-hidden="true">
                                <g fill="none" fill-rule="evenodd">
                                    <path class="foreground-26ym5y da-foreground" fill="currentColor" d="M1,14.1538462 L1.95,14.1538462 C3.73125,14.1538462 5.5125,13.5384615 6.81875,12.4307692 C5.15625,12.4307692 3.73125,11.2 3.1375,9.6 C3.375,9.6 3.6125,9.72307692 3.85,9.72307692 C4.20625,9.72307692 4.5625,9.72307692 4.91875,9.6 C3.1375,9.23076923 1.7125,7.63076923 1.7125,5.66153846 C2.1875,5.90769231 2.78125,6.15384615 3.49375,6.15384615 C2.425,5.41538462 1.83125,4.18461538 1.83125,2.70769231 C1.83125,1.96923077 2.06875,1.23076923 2.30625,0.615384615 C4.20625,3.07692308 7.05625,4.67692308 10.38125,4.8 C10.2625,4.67692308 10.2625,4.30769231 10.2625,4.06153846 C10.2625,1.84615385 12.04375,0 14.18125,0 C15.25,0 16.31875,0.492307692 17.03125,1.23076923 C17.8625,1.10769231 18.8125,0.738461538 19.525,0.246153846 C19.2875,1.23076923 18.575,1.96923077 17.8625,2.46153846 C18.575,2.46153846 19.2875,2.21538462 20,1.84615385 C19.525,2.70769231 18.8125,3.32307692 18.1,3.93846154 L18.1,4.43076923 C18.1,9.84615385 14.18125,16 6.9375,16 C4.68125,16 2.6625,15.3846154 1,14.1538462 Z"></path>
                                    <rect width="32" height="32"></rect>
                                </g>
                            </svg>
                        </a>
                        <a rel="noreferrer noopener" target="_blank" href="https://discord.gg/0Tmfo5ZbORCRqbAd" class="social-icon discord">
                            <svg class="social-icon-inner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="26" height="26">
                                <path fill="currentColor" fill-rule="evenodd" d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273l-1.47-1.338l-1.604-1.398l.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537c-1.336-.668-2.54-1.002-3.744-1.137c-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735c-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02c0 0 1 1.74 3.743 1.806c0 0 .4-.533.805-1.002c-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03c.33.136.66.27.93.4a8.18 8.18 0 0 0 1.8.536c.93.135 1.996.2 3.21 0c.6-.135 1.2-.267 1.8-.535c.39-.2.87-.4 1.397-.737c0 0-.6.936-2.205 1.404c.33.466.795 1 .795 1c2.744-.06 3.81-1.8 3.87-1.726c0-3.87-1.815-7.02-1.815-7.02c-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335c0 .74-.57 1.34-1.27 1.34c-.7 0-1.27-.6-1.27-1.334c.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335c0 .74-.57 1.34-1.27 1.34c-.7 0-1.27-.6-1.27-1.334c0-.74.57-1.338 1.27-1.338z" />
                            </svg>
                        </a>
                        <a rel="noreferrer noopener" target="_blank" href="https://github.com/BetterDiscord/BetterDiscord" class="social-icon github">
                            <svg class="social-icon-inner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="26" height="26">
                                <path fill="currentColor" fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                            </svg>
                        </a>
                    </div>
                </section>
            </div>
        </footer>
    </div>
</body>

</html>