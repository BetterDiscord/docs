"use strict";(self.webpackChunk_betterdiscord_docs=self.webpackChunk_betterdiscord_docs||[]).push([[9492],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=u(n),m=r,h=c["".concat(s,".").concat(m)]||c[m]||d[m]||i;return n?a.createElement(h,l(l({ref:t},p),{},{components:n})):a.createElement(h,l({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var u=2;u<i;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8365:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>u});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:4,description:"The requirements and format of a plugin."},l="Plugin Structure",o={unversionedId:"plugins/introduction/structure",id:"plugins/introduction/structure",title:"Plugin Structure",description:"The requirements and format of a plugin.",source:"@site/docs/plugins/introduction/structure.md",sourceDirName:"plugins/introduction",slug:"/plugins/introduction/structure",permalink:"/plugins/introduction/structure",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,description:"The requirements and format of a plugin."},sidebar:"pluginsSidebar",previous:{title:"Environment",permalink:"/plugins/introduction/environment"},next:{title:"Guidelines",permalink:"/plugins/introduction/guidelines"}},s={},u=[{value:"Requirements",id:"requirements",level:2},{value:"Details",id:"details",level:2},{value:"Meta",id:"meta",level:3},{value:"JavaScript",id:"javascript",level:3},{value:"Optional Functions",id:"optional-functions",level:4},{value:"getSettingsPanel",id:"getsettingspanel",level:5},{value:"observer",id:"observer",level:5},{value:"onSwitch",id:"onswitch",level:5}],p={toc:u};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"plugin-structure"},"Plugin Structure"),(0,r.kt)("h2",{id:"requirements"},"Requirements"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"BetterDiscord plugins are limited to a single file."),(0,r.kt)("li",{parentName:"ul"},"BetterDiscord plugins (files) must be named in the form ",(0,r.kt)("inlineCode",{parentName:"li"},"*.plugin.js"),"."),(0,r.kt)("li",{parentName:"ul"},"BetterDiscord plugins require a special header known as the meta."),(0,r.kt)("li",{parentName:"ul"},"BetterDiscord plugins must implement both a ",(0,r.kt)("inlineCode",{parentName:"li"},"start()")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"stop()")," function."),(0,r.kt)("li",{parentName:"ul"},"BetterDiscord plugins must either be a class or a function that returns the required object."),(0,r.kt)("li",{parentName:"ul"},"BetterDiscord plugins must be exported via ",(0,r.kt)("inlineCode",{parentName:"li"},"module.exports"),".")),(0,r.kt)("h2",{id:"details"},"Details"),(0,r.kt)("p",null,"BetterDiscord plugins must be in vanilla JavaScript and be contained in a single file in order to be loaded. That means if you want to use something like JSX, or TypeScript it must be transpiled. Similarly if you want to break out your code into multiple files it must be bundled. Both of these topics are covered later in the documentation."),(0,r.kt)("p",null,"Plugin files must be named in the format ",(0,r.kt)("inlineCode",{parentName:"p"},"*.plugin.js")," where ",(0,r.kt)("inlineCode",{parentName:"p"},"*")," is representative of any string. Usually this matches the name of the plugin without any spaces or special characters, however that is not a requirement."),(0,r.kt)("p",null,"Plugin files are split into two main pieces, the meta and the plugin code. If either of these are missing the plugin will not load."),(0,r.kt)("h3",{id:"meta"},"Meta"),(0,r.kt)("p",null,"The meta of a plugin contains metadata about the plugin as the name would suggest. The format of this meta is a JSDoc style comment at the ",(0,r.kt)("u",null,"very beginning")," of the file. Not having this at the beginning can cause BetterDiscord to not load the plugin. A minimal meta header would look something like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"/**\n * @name ExamplePlugin\n * @author YourName\n * @description Describe the basic functions. Maybe a support server link.\n * @version 0.0.1\n */\n")),(0,r.kt)("p",null,"And a fully filled out meta using all the fields would look something like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"/**\n * @name ExamplePlugin\n * @author YourName\n * @description Describe the basic functions. Maybe a support server link.\n * @version 0.0.1\n * @invite inviteCode\n * @authorId 51512151151651\n * @authorLink https://twitter.com/Whoever\n * @donate https://paypal.me/\n * @patreon https://patreon.com/\n * @website https://github.com/BetterDiscord/BetterDiscord\n * @source https://gist.github.com/rauenzi/e5f4d02fc3085a53872b0236cd6f8225\n */\n")),(0,r.kt)("p",null,"Please see the table below for details on the fields."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"The name of the plugin. Typcially does not contain spaces, but is allowed.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"author"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"The name of you the developer.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"description"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"A basic description of the what the plugin does.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"version"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"Version representing the current update level. ",(0,r.kt)("a",{parentName:"td",href:"https://semver.org/"},"Semantic versioning")," recommended.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"invite"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"A Discord invite code, useful for directing users to a support server.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"authorId"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"Discord snowflake ID of the developer. This allows users to get in touch.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"authorLink"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"Link to use for the author's name on the plugins page.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"donate"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"Link to donate to the developer.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"patreon"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"Link to the patreon of the developer.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"website"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"Developer's (or plugin's) website link.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"Link to the source on GitHub of the plugin.")))),(0,r.kt)("h3",{id:"javascript"},"JavaScript"),(0,r.kt)("p",null,"The basics of the plugin code are simple. The plugin must have both a ",(0,r.kt)("inlineCode",{parentName:"p"},"start()")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"stop()")," function which are called on enable and disable respectively. The plugin must also get those functions back to BetterDiscord using ",(0,r.kt)("inlineCode",{parentName:"p"},"module.exports"),"."),(0,r.kt)("p",null,"The simplest and most direct way is to do it is to return an object literal:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = () => ({\n   start() {\n\n   },\n   stop() {\n\n   }\n});\n")),(0,r.kt)("p",null,"But that of course is not the only way to do it. Many people like the syntactic sugar and extensibility of classes"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = class {\n   start() {\n\n   }\n   stop() {\n\n   }\n};\n")),(0,r.kt)("p",null,"while others prefer a more modular functional style."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const start = () => {};\nconst stop = () => {};\n\nmodule.exports = function() {};\nmodule.exports.start = start;\nmodule.exports.stop = stop;\n")),(0,r.kt)("p",null,"Of course there's those that prefer to wrap themselves up for safekeeping."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = () => {\n   return {\n      start: () => {},\n      stop: () => {}\n   }\n};\n")),(0,r.kt)("p",null,"But whatever your preference, just pass those functions on up!"),(0,r.kt)("p",null,"All of those examples are valid ways of getting those functions back to BetterDisord. The main idea is that when BetterDiscord calls ",(0,r.kt)("inlineCode",{parentName:"p"},'require("./yourplugin.plugin.js")'),", the ",(0,r.kt)("inlineCode",{parentName:"p"},"exports")," needs to ",(0,r.kt)("u",null,"either"),":"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"have both a ",(0,r.kt)("inlineCode",{parentName:"li"},"start()")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"stop()")," prototype function."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("em",{parentName:"li"},"be")," a function that returns an object containing both functions.")),(0,r.kt)("p",null,"It may seem roundabout to do it this way, but this is what allows for developers to make use of uninstantiated classes like the example above."),(0,r.kt)("p",null,"If you feel you have a solid grasp of how this works, take a look at the ",(0,r.kt)("a",{parentName:"p",href:"./guidelines"},"Guidelines")," before moving on to the ",(0,r.kt)("a",{parentName:"p",href:"../basics"},"Basics")," guide."),(0,r.kt)("h4",{id:"optional-functions"},"Optional Functions"),(0,r.kt)("p",null,"These are functions that plugins ",(0,r.kt)("em",{parentName:"p"},"can")," make use of but are not required at all. These are all supplied to BetterDiscord in the same place you provide ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"stop")),(0,r.kt)("h5",{id:"getsettingspanel"},"getSettingsPanel"),(0,r.kt)("p",null,"This function allows your plugins to have a settings panel displayed through BetterDiscord. The expecting return type is either an ",(0,r.kt)("inlineCode",{parentName:"p"},"HTMLElement")," or a ",(0,r.kt)("inlineCode",{parentName:"p"},"string")," representing the HTML."),(0,r.kt)("h5",{id:"observer"},"observer"),(0,r.kt)("p",null,"This function is called on every mutation of the ",(0,r.kt)("inlineCode",{parentName:"p"},"document"),". If you're unfamiliar with that terminology, take a look at ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/observe"},"MDN"),"."),(0,r.kt)("h5",{id:"onswitch"},"onSwitch"),(0,r.kt)("p",null,'This function is called every time the view is "switched". A better way to look at this is every time the user navigates such as changing the channel or server.'))}d.isMDXComponent=!0}}]);