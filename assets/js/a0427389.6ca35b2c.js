"use strict";(self.webpackChunk_betterdiscord_docs=self.webpackChunk_betterdiscord_docs||[]).push([[2419],{5162:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7294),r=n(6010);const o={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:n,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,i),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(7462),r=n(7294),o=n(6010),i=n(2466),s=n(6775),l=n(1980),u=n(7392),c=n(12);function d(e){return function(e){var t;return(null==(t=r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})))?void 0:t.filter(Boolean))??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function h(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??d(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const a=(0,s.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function g(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=h(e),[i,s]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[l,u]=m({queryString:n,groupId:a}),[d,g]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,c.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),b=(()=>{const e=l??d;return p({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{b&&s(b)}),[b]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),g(e)}),[u,g,o]),tabValues:o}}var b=n(2389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:t,block:n,selectedValue:s,selectValue:l,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.o5)(),h=e=>{const t=e.currentTarget,n=c.indexOf(t),a=u[n].value;a!==s&&(d(t),l(a))},p=e=>{var t;let n=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:i}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>c.push(e),onKeyDown:p,onClick:h},i,{className:(0,o.Z)("tabs__item",f.tabItem,null==i?void 0:i.className,{"tabs__item--active":s===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function k(e){const t=g(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",f.tabList)},r.createElement(y,(0,a.Z)({},e,t)),r.createElement(v,(0,a.Z)({},e,t)))}function w(e){const t=(0,b.Z)();return r.createElement(k,(0,a.Z)({key:String(t)},e))}},3346:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>u,toc:()=>d});var a=n(7462),r=(n(7294),n(3905)),o=n(4866),i=n(5162);n(614);const s={sidebar_position:1,description:"A guide to the basics."},l="Creating a Plugin",u={unversionedId:"plugins/basics/creating-a-plugin",id:"plugins/basics/creating-a-plugin",title:"Creating a Plugin",description:"A guide to the basics.",source:"@site/docs/plugins/basics/creating-a-plugin.mdx",sourceDirName:"plugins/basics",slug:"/plugins/basics/creating-a-plugin",permalink:"/plugins/basics/creating-a-plugin",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,description:"A guide to the basics."},sidebar:"pluginsSidebar",previous:{title:"Basics",permalink:"/plugins/basics"},next:{title:"Using the DOM",permalink:"/plugins/basics/dom"}},c={},d=[{value:"The Idea",id:"the-idea",level:2},{value:"The Style",id:"the-style",level:2},{value:"Things to Keep in Mind",id:"things-to-keep-in-mind",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2}],h={toc:d},p="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"creating-a-plugin"},"Creating a Plugin"),(0,r.kt)("h2",{id:"the-idea"},"The Idea"),(0,r.kt)("p",null,"The first thing to do when making a plugin, is to know what exactly you're trying to make. This helps limit the scope of what you're looking through in Discord's DOM tree or internal code, and also helps you structure your plugins. For example, a fully-fledged plugin that handles end-to-end encryption may need a bit more scaffolding than a plugin that just adds a button or some text to the screen."),(0,r.kt)("p",null,'Knowing what you want the plugin to do also allows you to reach out to our community of developers and ask for help. It\'s much easier to help someone with a specific task or end-goal rather than someone that "just wants to make a plugin".'),(0,r.kt)("h2",{id:"the-style"},"The Style"),(0,r.kt)("p",null,"Next, you'll need to decide which plugin style to use. As seen in the ",(0,r.kt)("a",{parentName:"p",href:"../introduction/structure"},"plugin structure")," docs, there a couple different ways to go about it. They are shown again below for clarity. Each one has pros and cons, but can each work well for simple to advanced plugins. In the end it ultimately comes down to the individual developer's style preference. A mix of the styles will be shown here in the docs."),(0,r.kt)(o.Z,{className:"code-tabs",mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"class",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:"showLineNumbers",showLineNumbers:!0},"/**\n * @name ExamplePlugin\n * @author YourName\n * @description Describe the basic functions. Maybe a support server link.\n * @version 0.0.1\n */\n\nmodule.exports = class MyPlugin {\n  constructor(meta) {\n    // Do stuff in here before starting\n  }\n\n  start() {\n    // Do stuff when enabled\n  }\n\n  stop() {\n    // Cleanup when disabled\n  }\n};\n"))),(0,r.kt)(i.Z,{value:"arrow",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:"showLineNumbers",showLineNumbers:!0},"/**\n * @name ExamplePlugin\n * @author YourName\n * @description Describe the basic functions. Maybe a support server link.\n * @version 0.0.1\n */\n\n// Do stuff here before being called\n\nmodule.exports = meta => ({\n  start() {\n    // Do stuff when enabled\n  },\n  stop() {\n    // Cleanup when disabled\n  }\n});\n"))),(0,r.kt)(i.Z,{value:"return",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:"showLineNumbers",showLineNumbers:!0},"/**\n * @name ExamplePlugin\n * @author YourName\n * @description Describe the basic functions. Maybe a support server link.\n * @version 0.0.1\n */\n\nmodule.exports = meta => {\n  // Do stuff in here before returning\n\n  return {\n    start: () => {\n      // Do stuff when enabled\n    },\n    stop: () => {\n      // Cleanup when disabled\n    }\n  }\n};\n")))),(0,r.kt)("p",null,"It's worth noting when deciding that each plugin is loaded similarly to a node module. This means that defining variables outside of the ",(0,r.kt)("inlineCode",{parentName:"p"},"module.exports")," will not result in scope creep or variable bloat."),(0,r.kt)("p",null,"Once you've got that decided, go ahead and save your template in your ",(0,r.kt)("a",{parentName:"p",href:"../introduction/quick-start#plugin-folder"},"plugins folder")," as ",(0,r.kt)("inlineCode",{parentName:"p"},"ExamplePlugin.plugin.js")," and change ",(0,r.kt)("inlineCode",{parentName:"p"},"ExamplePlugin")," to the name of your choice."),(0,r.kt)("h2",{id:"things-to-keep-in-mind"},"Things to Keep in Mind"),(0,r.kt)("p",null,"There's a lot to keep in mind as you develop your plugin. One of the most important being how to cleanup when the plugin is disabled. This may seem straightforward, but if you don't have it in mind as you develop, it may slip through the cracks. Say you add some text to the DOM and no longer have a reference to it. When it's time to disable and cleanup, you have to search through the DOM again just to find this node. Instead, if you had remembered that this will need to be cleaned up, you could have kept a reference in order to easily remove it later."),(0,r.kt)("p",null,"If you're looking to submit this plugin, or share it with others, it's worth keeping in mind what parts of the plugin are opinionated. For example, the way something is formatted or styled may look good to some and not to others."),(0,r.kt)("p",null,"If you have these things in mind while you develop, you can add unique classes to elements for themes and users to take advantage of, or even add ",(0,r.kt)("a",{parentName:"p",href:"./settings"},"plugin settings")," which we'll get to a bit later."),(0,r.kt)("h2",{id:"whats-next"},"What's Next?"),(0,r.kt)("p",null,"If you feel comfortable with everything so far, you're probably safe to move on to making your plugin by first ",(0,r.kt)("a",{parentName:"p",href:"./dom"},"interacting with the dom"),". Otherwise, take the time and experiment with the plugin templates and see what feels right, maybe even brush up on your JavaScript skills."))}m.isMDXComponent=!0}}]);