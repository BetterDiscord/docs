"use strict";(self.webpackChunk_betterdiscord_docs=self.webpackChunk_betterdiscord_docs||[]).push([[1378],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),u=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=u(n),h=a,m=p["".concat(l,".").concat(h)]||p[h]||d[h]||r;return n?o.createElement(m,s(s({ref:t},c),{},{components:n})):o.createElement(m,s({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,s=new Array(r);s[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[p]="string"==typeof e?e:a,s[1]=i;for(var u=2;u<r;u++)s[u]=n[u];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(7294),a=n(6010);const r={tabItem:"tabItem_Ymn6"};function s(e){let{children:t,hidden:n,className:s}=e;return o.createElement("div",{role:"tabpanel",className:(0,a.Z)(r.tabItem,s),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>v});var o=n(7462),a=n(7294),r=n(6010),s=n(2466),i=n(6775),l=n(1980),u=n(7392),c=n(12);function p(e){return function(e){var t;return(null==(t=a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})))?void 0:t.filter(Boolean))??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:a}}=e;return{value:t,label:n,attributes:o,default:a}}))}function d(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const o=(0,i.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(r),(0,a.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(o.location.search);t.set(r,e),o.replace({...o.location,search:t.toString()})}),[r,o])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,r=d(e),[s,i]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:r}))),[l,u]=m({queryString:n,groupId:o}),[p,f]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,r]=(0,c.Nk)(n);return[o,(0,a.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:o}),g=(()=>{const e=l??p;return h({value:e,tabValues:r})?e:null})();(0,a.useLayoutEffect)((()=>{g&&i(g)}),[g]);return{selectedValue:s,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),f(e)}),[u,f,r]),tabValues:r}}var g=n(2389);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){let{className:t,block:n,selectedValue:i,selectValue:l,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,s.o5)(),d=e=>{const t=e.currentTarget,n=c.indexOf(t),o=u[n].value;o!==i&&(p(t),l(o))},h=e=>{var t;let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}null==(t=n)||t.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:s}=e;return a.createElement("li",(0,o.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>c.push(e),onKeyDown:h,onClick:d},s,{className:(0,r.Z)("tabs__item",y.tabItem,null==s?void 0:s.className,{"tabs__item--active":i===t})}),n??t)})))}function k(e){let{lazy:t,children:n,selectedValue:o}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===o));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==o}))))}function w(e){const t=f(e);return a.createElement("div",{className:(0,r.Z)("tabs-container",y.tabList)},a.createElement(b,(0,o.Z)({},e,t)),a.createElement(k,(0,o.Z)({},e,t)))}function v(e){const t=(0,g.Z)();return a.createElement(w,(0,o.Z)({key:String(t)},e))}},6704:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>u,toc:()=>p});var o=n(7462),a=(n(7294),n(3905)),r=n(4866),s=n(5162);const i={sidebar_position:1},l="Preprocessing & Minification",u={unversionedId:"themes/advanced/preprocessing",id:"themes/advanced/preprocessing",title:"Preprocessing & Minification",description:"This section of the guide will walk you through the the concepts of preprocessing and minification with CSS and then do a small walkthrough.",source:"@site/docs/themes/advanced/preprocessing.md",sourceDirName:"themes/advanced",slug:"/themes/advanced/preprocessing",permalink:"/themes/advanced/preprocessing",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"themesSidebar",previous:{title:"Advanced",permalink:"/themes/advanced"},next:{title:"Optimizing Performance",permalink:"/themes/advanced/performance"}},c={},p=[{value:"Background",id:"background",level:2},{value:"What is a CSS preprocessor?",id:"what-is-a-css-preprocessor",level:3},{value:"Why would I want one?",id:"why-would-i-want-one",level:3},{value:"Preprocessor Options",id:"preprocessor-options",level:2},{value:"Which is right for me?",id:"which-is-right-for-me",level:3},{value:"Walkthrough",id:"walkthrough",level:2},{value:"Setup",id:"setup",level:3},{value:"Code",id:"code",level:3}],d={toc:p},h="wrapper";function m(e){let{components:t,...n}=e;return(0,a.kt)(h,(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"preprocessing--minification"},"Preprocessing & Minification"),(0,a.kt)("p",null,"This section of the guide will walk you through the the concepts of preprocessing and minification with CSS and then do a small walkthrough."),(0,a.kt)("h2",{id:"background"},"Background"),(0,a.kt)("h3",{id:"what-is-a-css-preprocessor"},"What is a CSS preprocessor?"),(0,a.kt)("p",null,"Preprocessors for CSS are usually little scripting languages that give you more power in your CSS. They allow you to use variables, nested selectors, conditional branches, functions, mixins, and even math. They can also help ensure the correctness of your CSS and maintain backward compatibility with older browsers. They can also help reduce the amount of CSS overall by checking for bloated selectors."),(0,a.kt)("p",null,"Minification is just transpiling your css to use as few characters as possible. This includes little tricks like not having a semicolon ",(0,a.kt)("inlineCode",{parentName:"p"},";")," on the last property of a selector style, and of course getting rid of all newlines. Most preprocessors have an option to perform minification as part of the task."),(0,a.kt)("h3",{id:"why-would-i-want-one"},"Why would I want one?"),(0,a.kt)("p",null,"These systems can enable you to make more complex themes that are easily maintainable. They can help cut down on reptition and reused code. They can also allow you to break your css out into multiple files and compile them together into one at the end. Whereas minification allows CSS loaded remotely to load faster because there is less data for a user to download."),(0,a.kt)("h2",{id:"preprocessor-options"},"Preprocessor Options"),(0,a.kt)("p",null,"There are many options these days when it comes to CSS preprocessors. The most popular options are Sass/scss, Less, Stylus, and PostCSS*. You can read a brief introduction to each of them ",(0,a.kt)("a",{parentName:"p",href:"https://www.bitdegree.org/tutorials/css-preprocessor/"},"here"),". Or for even more options take a look at ",(0,a.kt)("a",{parentName:"p",href:"https://www.sitepoint.com/6-current-options-css-preprocessors/"},"this article"),"."),(0,a.kt)("p",null,"*PostCSS is a bit of an exception because it is more of a postprocessor,, it can do all sorts of things with your CSS including handling the preprocessing through the other 3 mentioned preprocessors. Also unlike the others, PostCSS does not have all of the features out of the gate, it is a modular system so you only include what features you need."),(0,a.kt)("h3",{id:"which-is-right-for-me"},"Which is right for me?"),(0,a.kt)("p",null,"We don't know. Only you can make that decision for you and your project. The big preprocessors all generally have the same features and capabilites so it often comes down to personal preference of syntax. By far the most popular is SCSS which is a syntax for Sass. The most free and open ended is Stylus since it allows you to include or omit as much syntax as you want. Then there's PostCSS, which by default just uses regular CSS syntax but can be expanded to do just about anything. Raygun gives a really good breakdown on all this different syntaxes with multiple examples in ",(0,a.kt)("a",{parentName:"p",href:"https://raygun.com/blog/css-preprocessors-examples/"},"their article"),". We recommend giving it a look to help you decide."),(0,a.kt)("h2",{id:"walkthrough"},"Walkthrough"),(0,a.kt)("p",null,"This walkthrough is going to focus on the main reason we hear that developers want to use a processor","\u2014","being able to break out into multiple files. Since we're focused on one specific task the processor that makes the most sense here is PostCSS. This allows us to still use normal CSS syntax while gaining the individual features we want."),(0,a.kt)("p",null,"Take a look below at the structure we'll be using."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},".\n\u251c\u2500\u2500dist                    // Contains all the outputs from postcss.\n\u2502   \u2514\u2500\u2500import.css          // Import-ready css.\n\u251c\u2500\u2500src                     // Your source code.\n\u2502   \u251c\u2500\u2500guilds.css          // Any other file you may need to include.\n\u2502   \u2514\u2500\u2500index.css           // The postcss entrypoint.\n\u251c\u2500\u2500package.json            // Your module's package info.\n\u2514\u2500\u2500postcss.config.js       // Webpack build configuration file.\n")),(0,a.kt)("h3",{id:"setup"},"Setup"),(0,a.kt)("p",null,"Make sure you have ",(0,a.kt)("a",{parentName:"p",href:"https://nodejs.org/en"},"Node.js and npm")," installed. Then in your directory initialize your package."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm init\n")),(0,a.kt)("p",null,"With that out of the way we'll have to install some dependencies."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev postcss postcss-cli postcss-csso postcss-easy-import\n")),(0,a.kt)("p",null,"The first two dependencies are for building and running with PostCSS. ",(0,a.kt)("inlineCode",{parentName:"p"},"postcss-csso")," is for adding minification later, and ",(0,a.kt)("inlineCode",{parentName:"p"},"postcss-easy-import")," allows us to import local files and compile them into one."),(0,a.kt)("p",null,"Now, open your ",(0,a.kt)("inlineCode",{parentName:"p"},"package.json")," and set up the build script that we'll be using later."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "scripts": {\n        "build": "postcss src/index.css -o dist/import.css",\n        "build-prod": "postcss --env production src/index.css -o dist/import.css"\n    }\n}\n')),(0,a.kt)("p",null,"You'll notice we actually added two scripts, ",(0,a.kt)("inlineCode",{parentName:"p"},"build")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"build-prod"),". The first one we can use for development since it outputs normal CSS. The second one we can use for our import because it outputs minified CSS by indicating to build in production mode. This is actually set up in our ",(0,a.kt)("inlineCode",{parentName:"p"},"postcss.config.js"),", so let's set that up now."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="postcss.config.js"',title:'"postcss.config.js"'},'module.exports = ctx => {\n    return {\n        map: false,\n        plugins: {\n            "postcss-easy-import": {},\n            "postcss-csso": ctx.env === "production" ? {restructure: false} : false\n        }\n    };\n};\n')),(0,a.kt)("p",null,"As a quick explanation of what's going on here: ",(0,a.kt)("inlineCode",{parentName:"p"},"map: false")," means we are not making sourcemaps, and that's a whole separate topic. It also means we are using two plugins, the ones we installed before. We load ",(0,a.kt)("inlineCode",{parentName:"p"},"postcss-easy-import")," with no configured options. And ",(0,a.kt)("inlineCode",{parentName:"p"},"postcss-csso")," is configured to run only in ",(0,a.kt)("inlineCode",{parentName:"p"},"production")," mode and turn off otherwise."),(0,a.kt)("h3",{id:"code"},"Code"),(0,a.kt)("p",null,"With the set up out of the way, we're actually almost done. Let's just make our CSS files."),(0,a.kt)(r.Z,{className:"code-tabs files",mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"src/index.css",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css"},'@import "./guilds.css";\n\n:root {\n    --background-tertiary: #333333;\n}\n'))),(0,a.kt)(s.Z,{value:"src/guilds.css",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css",metastring:"showLineNumbers",showLineNumbers:!0},".wrapper-2PSQCG,\n.svg-2ifYOU {\n  width: 33px;\n  height: 33px;\n}\n\n.expandedFolderBackground-1kSAf6 {\n  left: 8px;\n  width: 33px;\n}\n")))),(0,a.kt)("p",null,"Seems almost too easy, right? Well let's run ",(0,a.kt)("inlineCode",{parentName:"p"},"npm run build")," anyways and see what happens."),(0,a.kt)("p",null,"It seems to build just fine, and there's a new ",(0,a.kt)("inlineCode",{parentName:"p"},"dist")," folder with an ",(0,a.kt)("inlineCode",{parentName:"p"},"import.css")," inside."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css",metastring:'title="dist/import.css',title:'"dist/import.css'},".wrapper-2PSQCG,\n.svg-2ifYOU {\n  width: 33px;\n  height: 33px;\n}\n\n.expandedFolderBackground-1kSAf6 {\n  left: 8px;\n  width: 33px;\n}\n\n:root {\n    --background-tertiary: #333333;\n}\n")),(0,a.kt)("p",null,"If you got this same result then you're all set! PostCSS is working perfectly and now you can have unlimited files for your CSS."),(0,a.kt)("p",null,"By the way. using ",(0,a.kt)("inlineCode",{parentName:"p"},"postcss-easy-import")," over some other options allows you to use ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Glob_(programming)"},"glob")," imports, which means you can include entire ",(0,a.kt)("em",{parentName:"p"},"folders")," at once if you wanted."),(0,a.kt)("p",null,"If you're interested in what other things you can do with PostCSS take a look at ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/postcss/postcss"},"their README"),". For information on using the other preprocessors, they all have great tutorials on their official websites you can follow. No special setup for BetterDiscord needed!"))}m.isMDXComponent=!0}}]);